<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>„Åä„Åä„Å™„Çä„Ç∏„É•„Éã„Ç¢„Éê„É¨„Éº„Éú„Éº„É´„ÇØ„É©„Éñ „ÇØ„É™„Çπ„Éû„Çπ‰ºö</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;900&display=swap" rel="stylesheet">
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <!-- Babel Standalone -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background-color: #fef2f2;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }
        .christmas-gradient {
            background: linear-gradient(135deg, #dc2626 0%, #16a34a 100%);
        }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        
        @keyframes bounce-subtle {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-3px); }
        }
        .animate-bounce-subtle {
          animation: bounce-subtle 2s infinite ease-in-out;
        }
        
        /* „É™„Ç¢„É´„Çø„Ç§„É†Êé•Á∂ö„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº */
        .connection-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            display: flex;
            align-items: center;
            gap: 6px;
            background: white;
            padding: 6px 12px;
            border-radius: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            font-size: 11px;
            font-weight: bold;
            z-index: 100;
        }
        .connection-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        .connected { background: #10b981; }
        .disconnected { background: #ef4444; animation: none; }
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
    </style>
    
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@19.0.0",
        "react-dom/client": "https://esm.sh/react-dom@19.0.0/client"
      }
    }
    </script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useMemo } from 'react';
        import ReactDOM from 'react-dom/client';

        // FirebaseÂàùÊúüÂåñ
        const firebaseConfig = {
          apiKey: "AIzaSyCF3oQ9DjgiGCMitFgDUzxzzIQ_mQf-zEY",
          authDomain: "xmas-game-2025.firebaseapp.com",
          databaseURL: "https://xmas-game-2025-default-rtdb.firebaseio.com",
          projectId: "xmas-game-2025",
          storageBucket: "xmas-game-2025.firebasestorage.app",
          messagingSenderId: "532428555172",
          appId: "1:532428555172:web:495a09b40c00268bc0b731",
          measurementId: "G-VN96NNS06F"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const scoresRef = database.ref('scores');
        const teamNamesRef = database.ref('teamNames');

        // --- Ë®≠ÂÆö„Éá„Éº„Çø (8„ÉÅ„Éº„É†) ---
        const DEFAULT_TEAMS = [
          { id: 'team-1', defaultName: '„ÉÅ„Éº„É†1', color: 'bg-red-500', relayGroup: 'group-red' },
          { id: 'team-2', defaultName: '„ÉÅ„Éº„É†2', color: 'bg-red-500', relayGroup: 'group-red' },
          { id: 'team-3', defaultName: '„ÉÅ„Éº„É†3', color: 'bg-blue-500', relayGroup: 'group-blue' },
          { id: 'team-4', defaultName: '„ÉÅ„Éº„É†4', color: 'bg-blue-500', relayGroup: 'group-blue' },
          { id: 'team-5', defaultName: '„ÉÅ„Éº„É†5', color: 'bg-yellow-400', relayGroup: 'group-yellow' },
          { id: 'team-6', defaultName: '„ÉÅ„Éº„É†6', color: 'bg-yellow-400', relayGroup: 'group-yellow' },
          { id: 'team-7', defaultName: '„ÉÅ„Éº„É†7', color: 'bg-green-500', relayGroup: 'group-green' },
          { id: 'team-8', defaultName: '„ÉÅ„Éº„É†8', color: 'bg-green-500', relayGroup: 'group-green' },
        ];

        const RELAY_GROUPS = [
          { id: 'group-red', name: 'Ëµ§„Ç∞„É´„Éº„Éó', color: 'bg-red-500', teamIds: ['team-1', 'team-2'] },
          { id: 'group-blue', name: 'Èùí„Ç∞„É´„Éº„Éó', color: 'bg-blue-500', teamIds: ['team-3', 'team-4'] },
          { id: 'group-yellow', name: 'ÈªÑ„Ç∞„É´„Éº„Éó', color: 'bg-yellow-400', teamIds: ['team-5', 'team-6'] },
          { id: 'group-green', name: 'Á∑ë„Ç∞„É´„Éº„Éó', color: 'bg-green-500', teamIds: ['team-7', 'team-8'] },
        ];

        const GAMES = [
          { id: 'game-dengon', name: '‰ºùË®Ä„Ç≤„Éº„É†', icon: 'üó£Ô∏è', rounds: 5, type: 'challenge-30-20-10' },
          { id: 'game-visual', name: 'Âãï‰ΩìË¶ñÂäõ', icon: 'üëÅÔ∏è', rounds: 5, type: 'challenge-30-20-10' },
          { id: 'game-gesture', name: '„Ç∏„Çß„Çπ„ÉÅ„É£„Éº', icon: 'üé≠', rounds: 6, type: 'success-10' },
          { id: 'game-relay', name: '„É™„É¨„Éº', icon: 'üèÉ', rounds: 2, type: 'ranking-40-relay' },
        ];

        const RankingChart = ({ rankings, teams }) => {
          const max = Math.max(...rankings.map(d => d.totalScore), 1);
          return (
            <div className="flex items-end justify-around h-32 pt-6 pb-2 px-2 bg-white/50 rounded-xl overflow-x-auto">
              {rankings.map(team => {
                const teamInfo = teams.find(t => t.id === team.teamId);
                const score = team.totalScore;
                const height = (score / max) * 100;
                return (
                  <div key={team.teamId} className="flex flex-col items-center flex-1 min-w-[40px]">
                    <div className="text-[9px] font-black mb-1 text-gray-800">{score}</div>
                    <div 
                      className={`${teamInfo.color} w-full max-w-[16px] rounded-t-sm shadow-sm transition-all duration-1000 ease-out`}
                      style={{ height: `${height}%`, minHeight: '4px' }}
                    ></div>
                    <div className="text-[8px] mt-2 font-bold text-gray-500 truncate w-full text-center px-1">
                      {teamInfo.name.length > 6 ? teamInfo.name.substring(0, 5) + '...' : teamInfo.name}
                    </div>
                  </div>
                );
              })}
            </div>
          );
        };

        const App = () => {
          const [scores, setScores] = useState([]);
          const [teamNames, setTeamNames] = useState({});
          const [activeTab, setActiveTab] = useState('leaderboard');
          const [selectedGameId, setSelectedGameId] = useState(GAMES[0].id);
          const [selectedRound, setSelectedRound] = useState(0);
          const [isConnected, setIsConnected] = useState(false);
          const [editingTeamId, setEditingTeamId] = useState(null);
          const [editingName, setEditingName] = useState('');

          // „ÉÅ„Éº„É†ÊÉÖÂ†±„ÅÆÁµ±Âêà
          const teams = useMemo(() => {
            return DEFAULT_TEAMS.map(team => ({
              ...team,
              name: teamNames[team.id] || team.defaultName
            }));
          }, [teamNames]);

          // FirebaseÊé•Á∂öÁä∂ÊÖã„ÅÆÁõ£Ë¶ñ
          useEffect(() => {
            const connectedRef = database.ref('.info/connected');
            connectedRef.on('value', (snap) => {
              setIsConnected(snap.val() === true);
            });
            return () => connectedRef.off();
          }, []);

          // „ÉÅ„Éº„É†Âêç„ÇíFirebase„Åã„ÇâÂèñÂæó
          useEffect(() => {
            const unsubscribe = teamNamesRef.on('value', (snapshot) => {
              const data = snapshot.val();
              if (data) {
                setTeamNames(data);
              }
            });
            return () => teamNamesRef.off('value', unsubscribe);
          }, []);

          // Firebase„Åã„Çâ„É™„Ç¢„É´„Çø„Ç§„É†„Åß„Çπ„Ç≥„Ç¢„Éá„Éº„Çø„ÇíÂèñÂæó
          useEffect(() => {
            const unsubscribe = scoresRef.on('value', (snapshot) => {
              const data = snapshot.val();
              if (data) {
                const scoresArray = Object.keys(data).map(key => data[key]);
                setScores(scoresArray);
              } else {
                setScores([]);
              }
            });
            return () => scoresRef.off('value', unsubscribe);
          }, []);

          const rankings = useMemo(() => {
            const totals = teams.map(team => {
              const total = scores
                .filter(s => s.teamId === team.id)
                .reduce((sum, s) => sum + s.points, 0);
              return { teamId: team.id, teamName: team.name, totalScore: total };
            });
            return totals.sort((a, b) => b.totalScore - a.totalScore).map((t, i) => ({ ...t, rank: i + 1 }));
          }, [scores, teams]);

          const updateScore = (teamId, gameId, roundIdx, pts) => {
            const scoreKey = `${teamId}_${gameId}_${roundIdx}`;
            scoresRef.child(scoreKey).set({
              teamId,
              gameId,
              roundIndex: roundIdx,
              points: pts,
              timestamp: Date.now()
            });
          };

          // „É™„É¨„Éº„ÅÆ„Ç∞„É´„Éº„ÉóÈ†Ü‰Ωç„Å´Âü∫„Å•„ÅÑ„Å¶ÂÄãÂà•„ÉÅ„Éº„É†„Å´ÂæóÁÇπ„Çí‰ªò‰∏é
          const updateRelayScore = (groupId, roundIdx, rank) => {
            const group = RELAY_GROUPS.find(g => g.id === groupId);
            const points = [40, 30, 20, 10][rank - 1];
            
            // „Åù„ÅÆ„Ç∞„É´„Éº„Éó„ÅÆ2„ÉÅ„Éº„É†„Å´Âêå„ÅòÂæóÁÇπ„Çí‰ªò‰∏é
            group.teamIds.forEach(teamId => {
              updateScore(teamId, 'game-relay', roundIdx, points);
            });
          };

          const updateTeamName = (teamId, newName) => {
            if (newName.trim()) {
              teamNamesRef.child(teamId).set(newName.trim());
            }
            setEditingTeamId(null);
            setEditingName('');
          };

          const resetAllData = () => {
            if (confirm("ÂÖ®„Éá„Éº„Çø„ÇíÊ∂àÂéª„Åó„Åæ„Åô„Åã?")) {
              scoresRef.remove().then(() => {
                setActiveTab('leaderboard');
                alert('„Éá„Éº„Çø„Çí„É™„Çª„ÉÉ„Éà„Åó„Åæ„Åó„Åü');
              }).catch((error) => {
                alert('„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü: ' + error.message);
              });
            }
          };

          const currentGame = GAMES.find(g => g.id === selectedGameId);

          return (
            <div className="min-h-screen pb-24 flex flex-col">
              {/* Êé•Á∂öÁä∂ÊÖã„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº */}
              <div className="connection-indicator">
                <div className={`connection-dot ${isConnected ? 'connected' : 'disconnected'}`}></div>
                <span style={{ color: isConnected ? '#10b981' : '#ef4444' }}>
                  {isConnected ? '„Ç™„É≥„É©„Ç§„É≥' : '„Ç™„Éï„É©„Ç§„É≥'}
                </span>
              </div>

              <header className="christmas-gradient text-white p-6 shadow-xl relative overflow-hidden shrink-0">
                <div className="absolute top-[-10px] right-[-10px] text-white/10 text-8xl rotate-12 animate-bounce-subtle">üéÑ</div>
                <div className="relative z-10">
                  <p className="text-[10px] font-black opacity-80 tracking-widest mb-1 uppercase">OONARI JR VOLLEYBALL CLUB</p>
                  <h1 className="text-2xl font-black flex items-center gap-2">
                    <span className="text-3xl">üéÖ</span> „Åä„Åä„Å™„Çä „ÇØ„É™„Çπ„Éû„Çπ‰ºö
                  </h1>
                </div>
              </header>

              <main className="p-4 max-w-md mx-auto w-full flex-grow">
                {activeTab === 'leaderboard' && (
                  <div className="space-y-4">
                    <div className="bg-white rounded-2xl p-5 shadow-md border border-red-50 text-center">
                      <h2 className="text-xs font-black text-red-600 mb-3 uppercase flex items-center justify-center gap-2">
                        <i className="fas fa-crown"></i> ÁèæÂú®„ÅÆ„É©„É≥„Ç≠„É≥„Ç∞
                      </h2>
                      <RankingChart rankings={rankings} teams={teams} />
                    </div>

                    <div className="space-y-3">
                      {rankings.map((team, i) => {
                        const teamInfo = teams.find(t => t.id === team.teamId);
                        return (
                          <div key={team.teamId} className="bg-white rounded-2xl p-4 flex items-center shadow-sm border border-gray-100">
                            <div className={`w-10 h-10 rounded-full flex items-center justify-center font-black mr-4 text-lg ${i === 0 ? 'bg-yellow-400 text-white shadow-lg' : 'bg-gray-100 text-gray-400'}`}>
                              {team.rank}
                            </div>
                            <div className="flex-grow">
                              <div className="text-sm font-black text-gray-700">{team.teamName}</div>
                              <div className="h-2 w-full bg-gray-100 rounded-full mt-2 overflow-hidden">
                                <div 
                                  className={`${teamInfo.color} h-full transition-all duration-1000`} 
                                  style={{width: `${(team.totalScore / (Math.max(rankings[0].totalScore, 1))) * 100}%`}}
                                ></div>
                              </div>
                            </div>
                            <div className="text-2xl font-black ml-4 text-gray-800 leading-none">
                              {team.totalScore}<span className="text-xs ml-1 opacity-40 font-normal">pt</span>
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  </div>
                )}

                {activeTab === 'input' && (
                  <div className="space-y-4">
                    <div className="flex gap-2 overflow-x-auto scrollbar-hide py-2">
                      {GAMES.map(g => (
                        <button 
                          key={g.id} 
                          onClick={() => {setSelectedGameId(g.id); setSelectedRound(0);}} 
                          className={`px-5 py-3 rounded-2xl text-xs font-black whitespace-nowrap transition-all shadow-sm ${selectedGameId === g.id ? 'bg-red-600 text-white shadow-red-200 ring-4 ring-red-100' : 'bg-white text-gray-400 border border-gray-100'}`}
                        >
                          {g.icon} {g.name}
                        </button>
                      ))}
                    </div>

                    <div className="bg-white rounded-3xl p-6 shadow-xl border border-gray-50">
                      <div className="flex justify-between items-center mb-6 border-b border-gray-50 pb-4">
                        <h3 className="font-black text-gray-800 text-lg">
                          {currentGame.icon} {currentGame.name}
                        </h3>
                        <div className="flex gap-1.5 bg-gray-50 p-1.5 rounded-xl">
                          {[...Array(currentGame.rounds)].map((_, i) => (
                            <button 
                              key={i} 
                              onClick={() => setSelectedRound(i)} 
                              className={`w-9 h-9 rounded-lg text-xs font-black transition-all ${selectedRound === i ? 'bg-white text-red-600 shadow-md scale-110' : 'text-gray-300'}`}
                            >
                              {i + 1}
                            </button>
                          ))}
                        </div>
                      </div>

                      {currentGame.type === 'ranking-40-relay' ? (
                        // „É™„É¨„ÉºÁî®„ÅÆÂÖ•Âäõ(„Ç∞„É´„Éº„ÉóÂçò‰Ωç)
                        <div className="space-y-4">
                          {RELAY_GROUPS.map(group => {
                            const groupTeams = teams.filter(t => group.teamIds.includes(t.id));
                            const current = scores.find(s => 
                              group.teamIds.includes(s.teamId) && 
                              s.gameId === currentGame.id && 
                              s.roundIndex === selectedRound
                            );
                            const pts = current ? current.points : null;
                            
                            return (
                              <div key={group.id} className="p-4 bg-gray-50/50 rounded-2xl border border-gray-100">
                                <div className="text-[10px] font-black text-gray-400 mb-2 flex items-center gap-2 uppercase tracking-widest">
                                  <div className={`w-2 h-2 rounded-full ${group.color}`}></div> {group.name}
                                </div>
                                <div className="text-[9px] text-gray-500 mb-3 flex gap-2">
                                  {groupTeams.map(t => (
                                    <span key={t.id} className="bg-white px-2 py-1 rounded">
                                      {t.name}
                                    </span>
                                  ))}
                                </div>
                                <div className="flex gap-2">
                                  {[1, 2, 3, 4].map(rank => {
                                    const p = [40, 30, 20, 10][rank - 1];
                                    const isActive = pts === p && current;
                                    return (
                                      <button 
                                        key={rank} 
                                        onClick={() => updateRelayScore(group.id, selectedRound, rank)} 
                                        className={`flex-1 py-3 rounded-xl text-xs font-black border-2 transition-all ${isActive ? 'bg-gray-800 text-white border-gray-800 shadow-lg' : 'bg-white text-gray-400 border-gray-100 active:bg-gray-100'}`}
                                      >
                                        {rank}‰Ωç
                                      </button>
                                    );
                                  })}
                                </div>
                              </div>
                            );
                          })}
                        </div>
                      ) : currentGame.type === 'challenge-30-20-10' ? (
                        // Âãï‰ΩìË¶ñÂäõ„Éª‰ºùË®Ä„Ç≤„Éº„É†Áî®„ÅÆÂÖ•Âäõ(ÊåëÊà¶ÂõûÊï∞ÊñπÂºè)
                        <div className="space-y-4">
                          {teams.map(team => {
                            const current = scores.find(s => s.teamId === team.id && s.gameId === currentGame.id && s.roundIndex === selectedRound);
                            const pts = current ? current.points : null;
                            return (
                              <div key={team.id} className="p-4 bg-gray-50/50 rounded-2xl border border-gray-100">
                                <div className="text-[10px] font-black text-gray-400 mb-3 flex items-center gap-2 uppercase tracking-widest">
                                  <div className={`w-2 h-2 rounded-full ${team.color}`}></div> {team.name}
                                </div>
                                <div className="flex gap-2">
                                  {[
                                    { label: '1ÂõûÁõÆÊàêÂäü', points: 30, color: 'bg-green-600' },
                                    { label: '2ÂõûÁõÆÊàêÂäü', points: 20, color: 'bg-blue-600' },
                                    { label: '3ÂõûÁõÆÊàêÂäü', points: 10, color: 'bg-yellow-600' },
                                    { label: 'Â§±Êïó', points: 0, color: 'bg-gray-600' }
                                  ].map(option => {
                                    const isActive = pts === option.points;
                                    return (
                                      <button 
                                        key={option.points} 
                                        onClick={() => updateScore(team.id, currentGame.id, selectedRound, option.points)} 
                                        className={`flex-1 py-3 px-2 rounded-xl text-[10px] font-black border-2 transition-all ${
                                          isActive 
                                            ? `${option.color} text-white border-transparent shadow-lg` 
                                            : 'bg-white text-gray-400 border-gray-100 active:bg-gray-100'
                                        }`}
                                      >
                                        <div>{option.label}</div>
                                        <div className="text-[9px] mt-0.5">{option.points}pt</div>
                                      </button>
                                    );
                                  })}
                                </div>
                              </div>
                            );
                          })}
                        </div>
                      ) : (
                        // „Ç∏„Çß„Çπ„ÉÅ„É£„ÉºÁî®„ÅÆÂÖ•Âäõ(ÊàêÂäü/Â§±ÊïóÊñπÂºè)
                        <div className="space-y-4">
                          {teams.map(team => {
                            const current = scores.find(s => s.teamId === team.id && s.gameId === currentGame.id && s.roundIndex === selectedRound);
                            const pts = current ? current.points : null;
                            return (
                              <div key={team.id} className="p-4 bg-gray-50/50 rounded-2xl border border-gray-100">
                                <div className="text-[10px] font-black text-gray-400 mb-3 flex items-center gap-2 uppercase tracking-widest">
                                  <div className={`w-2 h-2 rounded-full ${team.color}`}></div> {team.name}
                                </div>
                                <div className="flex gap-2">
                                  <button 
                                    onClick={() => updateScore(team.id, currentGame.id, selectedRound, pts === 10 ? 0 : 10)} 
                                    className={`w-full py-4 rounded-xl text-sm font-black border-2 flex items-center justify-center gap-3 transition-all ${pts === 10 ? 'bg-green-600 text-white border-green-600 shadow-lg' : 'bg-white text-gray-300 border-gray-100 active:bg-gray-100'}`}
                                  >
                                    <i className={pts === 10 ? "fas fa-check-circle" : "far fa-circle"}></i>
                                    {pts === 10 ? 'Ê≠£Ëß£Ê∏à„Åø (+10pt)' : 'Êú™ÂÖ•Âäõ / ÊåëÊà¶‰∏≠'}
                                  </button>
                                </div>
                              </div>
                            );
                          })}
                        </div>
                      )}
                    </div>
                  </div>
                )}

                {activeTab === 'teams' && (
                  <div className="space-y-4">
                    <div className="bg-white rounded-2xl p-5 shadow-md border border-red-50">
                      <h2 className="text-xs font-black text-red-600 mb-4 uppercase flex items-center gap-2">
                        <i className="fas fa-users"></i> „ÉÅ„Éº„É†Âêç„ÅÆË®≠ÂÆö
                      </h2>
                      <div className="space-y-3">
                        {teams.map(team => (
                          <div key={team.id} className="flex items-center gap-3 p-3 bg-gray-50 rounded-xl">
                            <div className={`w-4 h-4 rounded-full ${team.color} flex-shrink-0`}></div>
                            {editingTeamId === team.id ? (
                              <div className="flex-grow flex gap-2">
                                <input 
                                  type="text"
                                  value={editingName}
                                  onChange={(e) => setEditingName(e.target.value)}
                                  className="flex-grow px-3 py-2 rounded-lg border-2 border-red-300 focus:outline-none focus:border-red-500 text-sm font-bold"
                                  autoFocus
                                  onKeyPress={(e) => {
                                    if (e.key === 'Enter') {
                                      updateTeamName(team.id, editingName);
                                    }
                                  }}
                                />
                                <button
                                  onClick={() => updateTeamName(team.id, editingName)}
                                  className="px-4 py-2 bg-green-600 text-white rounded-lg font-black text-xs"
                                >
                                  ‰øùÂ≠ò
                                </button>
                                <button
                                  onClick={() => {
                                    setEditingTeamId(null);
                                    setEditingName('');
                                  }}
                                  className="px-4 py-2 bg-gray-400 text-white rounded-lg font-black text-xs"
                                >
                                  √ó
                                </button>
                              </div>
                            ) : (
                              <>
                                <div className="flex-grow text-sm font-black text-gray-700">
                                  {team.name}
                                </div>
                                <button
                                  onClick={() => {
                                    setEditingTeamId(team.id);
                                    setEditingName(team.name);
                                  }}
                                  className="px-4 py-2 bg-blue-500 text-white rounded-lg font-black text-xs"
                                >
                                  Á∑®ÈõÜ
                                </button>
                              </>
                            )}
                          </div>
                        ))}
                      </div>
                    </div>

                    {/* „É™„É¨„Éº„Ç∞„É´„Éº„ÉóË™¨Êòé */}
                    <div className="bg-white rounded-2xl p-5 shadow-md border border-blue-50">
                      <h2 className="text-xs font-black text-blue-600 mb-4 uppercase flex items-center gap-2">
                        <i className="fas fa-running"></i> „É™„É¨„Éº„ÅÆ„Ç∞„É´„Éº„ÉóÁ∑®Êàê
                      </h2>
                      <div className="space-y-3">
                        {RELAY_GROUPS.map(group => {
                          const groupTeams = teams.filter(t => group.teamIds.includes(t.id));
                          return (
                            <div key={group.id} className="p-3 bg-gray-50 rounded-xl">
                              <div className="flex items-center gap-2 mb-2">
                                <div className={`w-3 h-3 rounded-full ${group.color}`}></div>
                                <span className="text-sm font-black text-gray-700">{group.name}</span>
                              </div>
                              <div className="flex gap-2 ml-5">
                                {groupTeams.map(t => (
                                  <span key={t.id} className="text-xs bg-white px-2 py-1 rounded text-gray-600">
                                    {t.name}
                                  </span>
                                ))}
                              </div>
                            </div>
                          );
                        })}
                      </div>
                      <p className="text-[10px] text-gray-500 mt-4 leading-relaxed">
                        ‚Äª„É™„É¨„Éº„ÅØ‰∏äË®ò„ÅÆ„Ç∞„É´„Éº„Éó„ÅßÂÆüÊñΩ„Åó„Åæ„Åô„ÄÇ„Ç∞„É´„Éº„Éó„ÅÆÈ†Ü‰Ωç„Å´Âøú„Åò„Å¶„ÄÅÂêÑ„ÉÅ„Éº„É†„Å´Âêå„ÅòÂæóÁÇπ„ÅåÈÖçÂàÜ„Åï„Çå„Åæ„Åô„ÄÇ
                      </p>
                    </div>
                  </div>
                )}

                {activeTab === 'admin' && (
                  <div className="space-y-6 pt-10 text-center">
                    <div className="w-20 h-20 bg-red-100 text-red-600 rounded-full flex items-center justify-center mx-auto mb-4">
                      <i className="fas fa-trash-alt text-3xl"></i>
                    </div>
                    <h3 className="font-black text-gray-800 text-lg">ÂÖ®„Éá„Éº„Çø„ÅÆ„É™„Çª„ÉÉ„Éà</h3>
                    <button 
                      onClick={resetAllData}
                      className="mx-6 px-10 py-5 bg-red-600 text-white rounded-2xl font-black shadow-xl active:scale-95 transition-all"
                    >
                      ÂàùÊúüÂåñ„ÇíÂÆüË°å„Åô„Çã
                    </button>
                  </div>
                )}
              </main>

              <nav className="fixed bottom-6 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur-md border border-white rounded-3xl flex items-center justify-center p-2 z-50 shadow-2xl w-[90%] max-sm:max-w-[380px]">
                <button onClick={() => setActiveTab('leaderboard')} className={`flex flex-col items-center p-2 flex-1 transition-all rounded-2xl ${activeTab === 'leaderboard' ? 'bg-red-600 text-white shadow-lg' : 'text-gray-300'}`}>
                  <i className="fas fa-trophy text-base"></i>
                  <span className="text-[8px] font-black mt-1">È†Ü‰Ωç</span>
                </button>
                <button onClick={() => setActiveTab('input')} className={`flex flex-col items-center p-2 flex-1 transition-all rounded-2xl ${activeTab === 'input' ? 'bg-green-600 text-white shadow-lg' : 'text-gray-300'}`}>
                  <i className="fas fa-edit text-base"></i>
                  <span className="text-[8px] font-black mt-1">ÂÖ•Âäõ</span>
                </button>
                <button onClick={() => setActiveTab('teams')} className={`flex flex-col items-center p-2 flex-1 transition-all rounded-2xl ${activeTab === 'teams' ? 'bg-blue-600 text-white shadow-lg' : 'text-gray-300'}`}>
                  <i className="fas fa-users text-base"></i>
                  <span className="text-[8px] font-black mt-1">„ÉÅ„Éº„É†</span>
                </button>
                <button onClick={() => setActiveTab('admin')} className={`flex flex-col items-center p-2 flex-1 transition-all rounded-2xl ${activeTab === 'admin' ? 'bg-gray-800 text-white shadow-lg' : 'text-gray-300'}`}>
                  <i className="fas fa-cog text-base"></i>
                  <span className="text-[8px] font-black mt-1">Ë®≠ÂÆö</span>
                </button>
              </nav>
            </div>
          );
        };

        const rootEl = document.getElementById('root');
        if (rootEl) {
          const root = ReactDOM.createRoot(rootEl);
          root.render(<App />);
        }
    </script>
</body>
</html>
